# 应用场景
```
开发、测试、预发、生产环境应一致。
包括操作系统-OS、程序语言运行环境、各种中间件及版本。
生产数据脱敏后同步到测试环境，提高测试的准确性。
开发环境的Mock数据准备
应用配置可从各环境的环境变量中读取数据。

提供公用数据API服务：如交通、天气、税务。

错误处理：最终用户不应看到如404、302、500等错误信息。

通过对流量的控制、路由。按业务场景完成金丝雀、灰度等部署方式。

```

``` plantuml 
@startuml
   
   actor "Web端" as a1
   actor "移动端" as a2
   actor "桌面端" as a3
   actor "设备端" as a4
package aa {
    node "公用服务—镜像" as n1 {
       [分布式ID] as p0
       [事件服务] as p1
       [消息服务] as p2
       [MQ具体实现] as p3
       
       [日志存储] as p4 
       [日志可视化] as p5
       [API访问日志分析] as p6
       [服务健康检查] as p7
       [安全告警] as p8 
       
       [缓存服务] as p9

       p1 ..> p3 : 依赖 
       p2 ..> p3 : 依赖
       
       p5 <.. p6 : 泛化 
       p5 <.. p7 : 泛化 
       p5 <.. p8 : 泛化 
       p5 ..> p4 : 使用  
    }
    
   node "物资管理系统-SpringCloud" as n0 {
        [网关] as s1
        [设备网关_kong] as s11
        [配置服务] as s2
        [服务注册与发现] as s3
       [GraphQL-Scheam注册] as s4
        [业务原子服务一] as s5
        [业务原子服务二] as s6
        [业务原子服务三] as s7
        
        [BFF-WEB端服务] as s8
        [BFF-移动端服务] as s81
        [BFF桌面端服务] as s82
        
        [GraphQL行程服务] as s9
        [GraphQL仓库服务] as s91      
   }

}   
   

   
a1 ---> s1 : 访问
a2 ---> s1 : 访问
a3 ---> s1 : 访问
a4 ---> s11 : 访问



s8 ---> s9

s9 ---> s5
s9 ---> s6
s9 ---> s7

s5 ---> s4  : Scheam注册
s6 ---> s4 : Scheam注册
s7 ---> s4 : Scheam注册

s2 <-- s4 
s2 ---> s9 : 提供Scheam&服务信息上下文
s3 ---> s2

s5 ---> s3 : 服务注册
s6 ---> s3 : 服务注册
s7 ---> s3 : 服务注册 

s1 ---> s81 : 分发
s1 ---> s82 : 分发
s1 ---> s8 : 分发
s91 --> s5
s91 --> s6
s91 --> s7

s81 ---> s9

s8 ---> s91
s81 ---> s91
s82 ---> s91

s1 --> p5 : 路由调用


s1 --> p4 : 日志采集
s2 --> p4 : 日志采集
s3 --> p4 : 日志采集
s4 --> p4 : 日志采集
s5 --> p4 : 日志采集
s6 --> p4 : 日志采集
s7 --> p4 : 日志采集
s8 --> p4 : 日志采集
s9 --> p4 : 日志采集
@enduml
```